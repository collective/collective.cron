<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  lang="en"
  metal:use-macro="context/main_template/macros/master"
  i18n:domain="plone.app.cron">
  <body>
    <metal:main fill-slot="main">
      <tal:main-macro metal:define-macro="main"
        tal:define="toLocalizedTime nocall:context/@@plone/toLocalizedTime">
        <div tal:replace="structure provider:plone.abovecontenttitle" />
        <h1 tal:content="view/getTitle"></h1>
        <h2>Details</h2>
        <div>
          <span i18n:translate="">Status :</span>
          <span tal:content="python:bool(context.activated) and 'Activated' or 'Deactivated'" />
        </div>
        <div>
          <span i18n:translate="">Periodicity :</span>
          <span tal:content="structure view/w/periodicity/render" />
        </div>
        <div class="discreet">
          <tal:block condition="context/getLastRun">
            <span i18n:translate="">Last run on :</span>
            <span tal:content="python:context.getLastRun().strftime('%x %X')" />
          </tal:block>
        </div>
        <div class="discreet">
          <tal:block condition="context/getLastStatus">
            <span i18n:translate="">Last status:</span>
            <span>
              <a
                tal:attributes="href python:context.getLastResult().absolute_url()"
                tal:content="context/getLastStatus">OK</a>
            </span>
          </tal:block>
        </div>
        <tal:block condition="python:context.activated and bool(view.next_runtime()) and context.activated">
          <div class="jobstatus">
            <span i18n:translate="">Will run now on :</span>
            <span tal:content="python:view.next_runtime()" />
          </div>
        </tal:block>
        <div class="actions">
          <h2>Backend available actions:</h2>
          <ul>
            <tal:t tal:content="structure provider:ccron.backendactions"/>
          </ul>
        </div>
      </tal:main-macro>
    </metal:main>
  </body>
</html>
